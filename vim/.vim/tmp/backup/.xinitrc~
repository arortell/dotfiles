#!/bin/bash

echo '################ Setting Up Monitors ######################\n' > ~/.xinit.log
#xrandr --output DisplayPort-0 --mode 1680x1050 --right-of DVI-1
#xrandr --output DVI-1 --mode 1366x768 --primary
#xandr --output HDMI-0 --mode 1920x1080 --left-of DVI-1
xrandr --output HDMI-0 --mode 1366x768 --primary
#xrandr --output HDMI-0 --mode 1920x1080 --primary


#if [ -d /etc/X11/xinit/xinitrc.d ]; then
#    for f in /etc/X11/xinit/xinitrc.d/?* ; do
#        [ -x "$f" ] && . "$f"
#    done
#    unset f
#fi

echo '################### Starting Daemons #######################\n' >> ~/.xinit.log

echo 'starting unclutter\n' >> ~/.xinit.log
unclutter >> ~/.xinit.log 2>&1 &

echo 'starting undiskie\n' >> ~/.xinit.log
udiskie >> ~/.xinit.log 2>&1 &

echo 'starting dropbox\n' >> ~/.xinit.lo
dropbox-cli start >> ~/.xinit.log 2>&1 &

echo 'starting yandex disk\n' >> ~/.xinit.log
yandex-disk start >> ~/.xinit.log 2>&1 &

echo 'starting compton\n' >> ~/.xinit.log 
compton >> ~/.xinit.log 2>&1 &

echo 'starting transmission daemon\n' >> ~/.xinit.log
transwrap >> ~/.xinit.log 2>&1 &

echo 'setting Cursor\n' >> ~/.xinit.log
xsetroot -cursor_name left_ptr 2>&1 &

echo 'starting gpg-agent daemon\n' >> ~/.xinit.log
gpg-agent --daemon --pinentry-program /usr/bin/pinentry >> ~/.xinit.log 2>&1 &

echo '##################### Setting Wallpaper ###################\n' >> ~/.xinit.log
feh --bg-fill /home/Yandex-Disk/imgs/Wallpapers/Arch/kali_arch.jpeg 

echo '##################### Java Work Around ###################\n' >> ~/.xinit.log
export _JAVA_AWT_WM_NONREPARENTING=1

echo '##################### Turn off Screen Blanking ####################\n' >> ~/.xinit.log
xset s off
xset s noblank
xset -dpms

# start bspwm and sxhkd
echo '###################### Starting Window-Manager ################\n' >> ~/.xinit.log
echo 'starting sxhkd\n' >> ~/.xinit.log
exec sxhkd > ~/.config/sxhkd/sxhkd.log 2>&1 &
echo 'starting bspwm\n' >> ~/.xinit.log
exec wm > ~/.config/bspwm/bspwm.log 2>&1
