#!/bin/bash -
#===============================================================================
#
#          FILE: day-of-week.sh
#
#         USAGE: ./day-of-week.sh
#
#   DESCRIPTION: 
#
#       OPTIONS: ---
#  REQUIREMENTS: ---
#          BUGS: ---
#         NOTES: ---
#        AUTHOR: Adam Ortell (), arortell@gmail.com
#  ORGANIZATION: 
#       CREATED: 03/22/2018 07:48:13 AM
#      REVISION:  ---
#===============================================================================

set -o nounset                                  # Treat unset variables as an error

date="$(date +$Y-%m-%d)"

eval $(echo "${date}" | nawk -F- '{printf("year=%s month=%s day=%s\n", $1, $2, $3)}')

echo "year->[${year}] month->[${month}] day->[${day}]"

cal "${month}" "${year}" | nawk -v day="${day}" '
  FNR > 2 {
    for(i=1; i <= NF; i++)
      if ( $i == day) {
        #printf("day->[%d] row->[%d]\n", $i, FNR-2)
        printf("%d\n", (NF == 7 || FNR!=3) ? i-1 : i+(6-NF))
        exit
      }
  }
'

