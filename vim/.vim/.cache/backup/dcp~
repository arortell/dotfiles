#!/bin/bash -
#===============================================================================
#
#          FILE: dcp.sh
#
#         USAGE: ./dcp.sh
#
#   DESCRIPTION: 
#
#       OPTIONS: ---
#  REQUIREMENTS: ---
#          BUGS: ---
#         NOTES: ---
#        AUTHOR: Adam Ortell (), arortell80@gmail.com
#  ORGANIZATION: 
#       CREATED: 08/18/2018 06:28:33 PM
#      REVISION:  ---
#===============================================================================

set -o nounset                                  # Treat unset variables as an error
set -eo pipefail                                # exit if ANY command fails,errors from pipe

progname="$(basename "$0")"                     # name of script

if [ -d "$1" ]; then
  echo "$1" is a directory - aborting.
  exit
fi

if [ -d "$2" ]; then
  OUTFILE="$2/"`basename "$1"`
else
  OUTFILE="$2"
fi

dd if="$1" of="$OUTFILE" 2>&1 &;
PID=`pidof -s dd`

while [[ -x "/proc/$PID" ]]; do
  kill -USR1 "$PID"
  sleep 1
done
