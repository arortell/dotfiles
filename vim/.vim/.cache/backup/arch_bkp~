#!/bin/bash -
#===============================================================================
#
#          FILE: backup.sh
#
#         USAGE: ./backup.sh
#
#   DESCRIPTION: 
#
#       OPTIONS: ---
#  REQUIREMENTS: ---
#          BUGS: ---
#         NOTES: ---
#        AUTHOR: Adam Ortell (), arortell@gmail.com
#  ORGANIZATION: 
#       CREATED: 03/30/2018 12:41:17 PM
#      REVISION:  ---
#===============================================================================

set -o nounset                                  # Treat unset variables as an error

dir="$HOME/backup"

if [[ -d "$dir" ]]; then
  rm -rf "$dir"
fi

mkdir "$dir" && cd "$dir" || exit 1

if ! sudo tar -cvzf etc.tar.gz /etc &> /dev/null; then
  echo "Compressing /etc failed....."
  exit 2
fi

if ! tar -cvzf home.tar.gz /home &> /dev/null; then
  echo "Compressing /home failed....."
  exit 3
fi

if type pacaur &> /dev/null; then
  pacaur -Q > INSTALLED
fi

if [[ -d "/videos0/" ]]; then
  cp -rf "$dir" /videos0 && rm -rf "$dir"
  echo "$dir was succesfully moved to /videos0....."
else
  echo "/videos0 does not exist on this system....."
fi

echo "Success....."
